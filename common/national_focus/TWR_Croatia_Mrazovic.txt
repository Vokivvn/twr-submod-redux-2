###############################################
## SOCIALIST CROATIA TREE - Coded by Spyeter###
###############################################
shared_focus = {
	id = CRO_The_People_Triumphant
	icon = GFX_CRO_The_People_Triumphant
	cost = 5
	x = 14
	y = 0
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_The_People_Triumphant"
		custom_effect_tooltip = Focus_be_Bypassed_tt
		news_event = { id = croatianews.34 }
		add_ideas = authoritarian_system
		hidden_effect = {
			retire_country_leader = yes
			retire_ideology_leader = marxist_leninist
			retire_ideology_leader = bolshevik_leninist
			cro_commie_leaders = yes
		}
	}
}

shared_focus = {
	id = CRO_Ending_Nationalism
	icon = GFX_SER_focus_death_to_fascism
	cost = 5
	x = -2
	y = 1
	relative_position_id = CRO_The_People_Triumphant
	prerequisite = {
		focus = CRO_The_People_Triumphant
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Ending_Nationalism"
		add_popularity = {
			ideology = national_socialist
			popularity = -0.25
}
                add_popularity = {
			ideology = fascist
			popularity = -0.30
}

	}
}

shared_focus = {
	id = CRO_Secularize_The_Nation
	icon = GFX_SER_focus_reluctant_secularism
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_The_People_Triumphant
	prerequisite = {
		focus = CRO_The_People_Triumphant
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Secularize_The_Nation"
		add_political_power = 50
                add_popularity = {
			ideology = socialist
			popularity = 0.05
}
                add_popularity = {
			ideology = bolshevik_leninist
			popularity = 0.10
}
                add_popularity = {
			ideology = Marxist_leninist
			popularity = 0.07
}
           
	}
}

shared_focus = {
	id = CRO_Destroy_the_Ustase
	icon = GFX_SER_focus_end_the_ustase
	cost = 5
	x = 2
	y = 1
	relative_position_id = CRO_The_People_Triumphant
	prerequisite = {
		focus = CRO_The_People_Triumphant
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Destroy_the_Ustase"
                remove_ideas = CRO_Ustashe_Resistance_idea
		add_political_power = -50
		add_popularity = {
			ideology = national_socialist
			popularity = -0.30
		}
	}
}

shared_focus = {
	id = CRO_Introduce_Market_Socialism
	icon = GFX_GENERIC_Clogs_Socialist
	cost = 5
	x = -2
	y = 1
	relative_position_id = CRO_Destroy_the_Ustase
	prerequisite = {
		focus = CRO_Secularize_The_Nation
	}
	prerequisite = {
		focus = CRO_Ending_Nationalism
	}
	prerequisite = {
		focus = CRO_Destroy_the_Ustase
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Introduce_Market_Socialism"
		add_ideas = SER_illyrian_market_socialism_idea_2
	}
}

shared_focus = {
	id = CRO_The_Illyrian_Model
	icon = GFX_SER_focus_illyrian_model
	cost = 5
	x = -2
	y = 1
	relative_position_id = CRO_Introduce_Market_Socialism
	prerequisite = {
		focus = CRO_Introduce_Market_Socialism
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_The_Illyrian_Model"
		swap_ideas = {
			remove_idea = SER_illyrian_market_socialism_idea_2
			add_idea = SER_illyrian_market_socialism_idea_4
		}
	}
}

shared_focus = {
	id = CRO_Five_Year_Plan
	icon = GFX_GENERIC_Minimize_Commodity_Production
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_The_Illyrian_Model
	prerequisite = {
		focus = CRO_The_Illyrian_Model
	}
	available = {
		has_completed_focus = CRO_A_New_Four_Year_Plan
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Five_Year_Plan"
		swap_ideas = {
			remove_idea = CRO_Four_Year_Plan_idea 
			add_idea = SER_yugo_five_year_plan
		}
		hidden_effect = {
			remove_ideas = SER_yugo_five_year_plan
			add_ideas = SER_yugo_five_year_plan
		}
	}
}

shared_focus = {
	id = CRO_Free_market_zones
	icon = GFX_SER_focus_reopen_the_fruit_market
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_Five_Year_Plan
	prerequisite = {
		focus = CRO_Five_Year_Plan
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Free_market_zones"
		add_ideas = CRO_Free_market_zones_idea
		}
	}


shared_focus = {
	id = CRO_Purge_The_Beraists
	icon = GFX_focus_CDA_end_bourg_nationalism
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_Introduce_Market_Socialism
	prerequisite = {
		focus = CRO_Introduce_Market_Socialism
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Purge_The_Beraists"
		IF = {
			limit = {
				has_dlc = "La Resistance"
			}
			cro_create_intelligence_agency = yes
		}	
        retire_ideology_leader = marxist_leninist
		random_unit_leader = {
			limit = { 
				has_id = 100009
			}
			retire = yes
		}
		create_country_leader = {
			name = "Collective Leadership"
			desc = ""
			picture = "ML_Collective_Leadership.dds"
			expire = "1965.1.1"
			ideology = marxism_leninism 
			traits = {}
		}
		set_country_flag = andrija_hebrang_unavailable
		set_country_flag = Ivan_Stevo_Krajacic_unavailable 
		swap_ideas = {
			remove_idea = CRO_MoS_Ivan_Stevo_Krajacic
			add_idea = CRO_MoS_Maks_Bace_Milic 
		}		
        add_popularity = {
			ideology = marxist_leninist
			popularity = -0.15
		}
	}
}

shared_focus = {
	id = CRO_Rearm_the_Republic
	icon = GFX_GENERIC_Worker_Police
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_Purge_The_Beraists
	prerequisite = {
		focus = CRO_Purge_The_Beraists
	}
        available = {
        has_completed_focus = CRO_The_Worst_is_Behind_Us
        }
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Rearm_the_Republic"
		add_timed_idea = {
			idea = CRO_Rearming_the_Republic_idea 
			days = 730
		}
	}
}

shared_focus = {
	id = CRO_Local_Autonomy
	icon = GFX_SER_focus_sideline_republics
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_Rearm_the_Republic
	prerequisite = {
		focus = CRO_Rearm_the_Republic
	}
	available = {
        owns_state = 104
        owns_state = 981
        owns_state = 982
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Local_Autonomy"
		hidden_effect = {
			cro_remove_bosnia_modifiers = yes
		}
		104 = { add_core_of = CRO }
		981 = { add_core_of = CRO }
		982 = { add_core_of = CRO }
		103 = { add_core_of = CRO }
		819 = { add_core_of = CRO }
		104 = { add_core_of = CRO }
		163 = { add_core_of = CRO }
		815 = { add_core_of = CRO }
		813 = { add_core_of = CRO }
		45 = { add_core_of = CRO }
	}
}

shared_focus = {
	id = CRO_Relax_State_Censorship
	icon = GFX_GENERIC_Press_Censorship
	cost = 5
	x = 2
	y = 1
	relative_position_id = CRO_Introduce_Market_Socialism
	prerequisite = {
		focus = CRO_Introduce_Market_Socialism
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Relax_State_Censorship"
                add_ideas = SER_Relaxing_state_censorship
		add_popularity = {
			ideology = socialist
			popularity = 0.10
		}
	}
}

shared_focus = {
	id = CRO_Attract_immigration
	icon = GFX_goal_generic_construct_infrastructure
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_Relax_State_Censorship
	prerequisite = {
		focus = CRO_Relax_State_Censorship
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Attract_immigration"
		103 = { add_manpower = 500 }
		1016 = { add_manpower = 500 }
		IF = {
			limit = {
				CRO = { owns_state = 163 }
			}
			163 = { add_manpower = 250 }
		}
		add_timed_idea = {
			idea = QUE_Relax_Immigration
			days = 1000
		}
	}
}

shared_focus = {
	id = CRO_Deal_With_Church
	icon = GFX_GENERIC_Catholic_Government
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_Attract_immigration
	prerequisite = {
		focus = CRO_Attract_immigration
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Deal_With_Church"
		country_event = {
			id = twrcroatia.43
		}
	}
}

shared_focus = {
	id = CRO_Socialism_Successful
	icon = GFX_GENERIC_communist_star
	cost = 5
	x = -2
	y = 1
	relative_position_id = CRO_Deal_With_Church
	prerequisite = {
		focus = CRO_Free_market_zones
	}
	prerequisite = {
		focus = CRO_Local_Autonomy
	}
	prerequisite = {
		focus = CRO_Deal_With_Church
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Socialism_Successful"
		remove_ideas = CRO_Unstable_Government_idea
                add_research_slot = 1
	}
}

shared_focus = {
	id = CRO_The_Liberation
	icon = GFX_SER_focus_send_out_the_partisans
	cost = 10
	x = 20
	y = 0
	cancelable = no
	available = {
		has_completed_focus = CRO_Socialism_Successful
		has_completed_focus = CRO_The_Worst_is_Behind_Us
		has_completed_focus = CRO_Mediterranean_Navy_Expansion
		has_completed_focus = CRO_Modernise_Our_Land_Forces
		has_completed_focus = CRO_Improving_The_Airforce
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_The_Liberation"
                custom_effect_tooltip = CRO_balkan_socialist_liberation_decisions_tt
                set_country_flag = CRO_socialist_puppets_decisions_flag
				set_cosmetic_tag = CRO_Illyria_Movement
                custom_effect_tooltip = CRO_Illyrian_Fed_tt
                hidden_effect = {
                        add_state_core = 105  #Montenegro
						add_state_core = 109  #Croatia
						add_state_core = 104  #Bosnia
						add_state_core = 983  #Herzegovina
						add_state_core = 103  #Dalmatia
						add_state_core = 1016 #Senj
						add_state_core = 163  #Zara
						add_state_core = 770  #Prekmurje
						add_state_core = 102  #Slovenia
						add_state_core = 765  #Ljubljana
						add_state_core = 815  #Rijeka
						add_state_core = 814  #Western Slovenia
						add_state_core = 813  #Istria
						add_state_core = 812  #Southern Trieste
                        add_state_core = 811  #Northern Trieste
                        add_state_core = 772  #West Banat
                        add_state_core = 819
                        add_state_core = 981 
                        add_state_core = 163 
                        add_state_core = 45 
                }
	}
}
shared_focus = {
	id = CRO_End_The_SS_Madness
	icon = GFX_SER_focus_destroy_banat
	cost = 5
	x = -2
	y = 1
	relative_position_id = CRO_The_Liberation
	prerequisite = {
		focus = CRO_The_Liberation
	}
	bypass = {
	SBA = { exists = no }
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_End_The_SS_Madness"
		create_wargoal = {
					type = annex_everything
					target = SBA
				}
	}
}

shared_focus = {
	id = CRO_Take_Dalmatia
	icon = GFX_CRO_Dalmatia
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_The_Liberation
	prerequisite = {
		focus = CRO_The_Liberation
	}
	bypass = {
	163 = { is_owned_by = CRO }
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Take_Dalmatia"
                ITA = {
			country_event = {
				id = twrcroatia.52
			}
		}
       }
}

shared_focus = {
	id = CRO_Take_Northern_Slovenia
	icon = GFX_SLV_focus_the_nla_pds_ascendent
	cost = 5
	x = 2
	y = 1
	relative_position_id = CRO_The_Liberation
	prerequisite = {
		focus = CRO_The_Liberation
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Take_Northern_Slovenia"
				custom_effect_tooltip = CRO_declare_war_germany_tt
		ITA = {
			country_event = {
				id = twrcroatia.81
			}
		}
		                   IF = {
                        limit = {
                                  GER = { owns_state = 102 }
                              }
               		create_wargoal = {
				type = annex_everything
				target = GER
			}
	              }
                   IF = {
                        limit = {
                                  HGR = { owns_state = 102 }
                              }
               		create_wargoal = {
				type = annex_everything
				target = HGR
			}
	              }
                   IF = {
                        limit = {
                                  HSS = { owns_state = 102 }
                              }
               		create_wargoal = {
				type = annex_everything
				target = HSS
			}
	              }
                   IF = {
                        limit = {
                                  DDR = { owns_state = 102 }
                              }
               		create_wargoal = {
				type = annex_everything
				target = DDR
			}
	              }
                                IF = { 
                        limit = {
                                  SLV = { exists = yes }
                              }
             SLV = { country_event = { id = twrcroatia.91 } }
								}
	}
}

shared_focus = {
	id = CRO_Establish_Republics
	icon = GFX_GENERIC_bureaucracy_issues
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_Take_Dalmatia
        prerequisite = {
		focus = CRO_Take_Northern_Slovenia
	}
        prerequisite = {
		focus = CRO_Take_Dalmatia
	}
        prerequisite = {
		focus = CRO_End_The_SS_Madness
	}
        available = {
		CRO = { controls_state = 105 }
		CRO = { controls_state = 811 }
		CRO = { controls_state = 812 }
		CRO = { controls_state = 813 }
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Establish_Republics"
                add_stability = 0.05
          }
}

shared_focus = { 
	id = CRO_Proclaim_the_Federation
	icon = GFX_CRO_Proclaim_the_Federation
	cost = 10
	x = 0
	y = 1
	relative_position_id = CRO_Establish_Republics
	prerequisite = {
		focus = CRO_Establish_Republics
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Proclaim_the_Federation"
                news_event = { id = croatianews.6 }
                add_ideas = CRO_Renew_The_Illyrian_movement_idea 
                set_cosmetic_tag = CRO_Illyria
                set_party_name = {
                               ideology = socialist
                               name = SSPI
                               long_name = SSPI_long
                      }
				set_party_name = {
								ideology = bolshevik_leninist 
								name = SKI
								long_name = SKI_long
				}
                set_party_name = {
                               ideology = marxist_leninist
                               name = KPI
                               long_name = KPI_long
                      }
	}
}

shared_focus = { 
	id = CRO_Democratic_Socialism
	icon = GFX_CRO_Democratic_Socialism
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRO_Proclaim_the_Federation
	prerequisite = {
		focus = CRO_Proclaim_the_Federation
	}
	cancelable = no
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: focus CRO_Proclaim_the_Federation"
                add_ideas = established_democracy
                set_country_leader_ideology = democratic_socialism
                country_event = { hours = 1 id = twrcroatia.85 }
	}
}